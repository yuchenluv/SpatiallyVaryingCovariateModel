---
title: "Validations"
jupyter: julia-1.9
execute:
  cache: true
---

Mainly plot for cross-validation results

## Setup

Load in packages

```{julia}
#| code-fold: true
using CairoMakie
using CSV
using DataFrames
using Distributions
using DrWatson
using GeoJSON
using GeoMakie
using HTTP
using Plots;
```

## Quantiles

```{julia}
raw_data_prcp = raw_data_all[:, 2:size(raw_data_all)[2]-1][:, sub1_index]
# raw_data_prcp[1:111, :] .= missing
# raw_data_prcp[123:134, :] .= missing
raw_data_prcp[112:122, :] .= missing
non_missing_count = [count(!ismissing, col) for col in eachcol(raw_data_prcp)]
total_records = sum(non_missing_count)
k = sim_quantiles(raw_data_prcp, μ_beta_sub1, logσ_beta_sub1, μ0_sub1, logσ0_sub1, xi_sub1, log_CO2, total_records)
quantile_sub1_outofsample = Plots.histogram(vec(k), bins=30, legend=false, xlabel="", ylabel="frequency", normalize=:pdf, fill=true, color=:grey, fillalpha=0.8, title="sub1 out of sample")
hline!([1], color=:blue, linewidth=3)
annotate!([0.95], [0.95], Plots.text("ideal", :right, 15, :blue))
# save(plotsdir("1d/quantile_sub1_outofsample.png"), quantile_sub1_outofsample)
```
